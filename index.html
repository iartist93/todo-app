<!DOCTYPE html>
<html>
  <head>
    <title>Parcel Sandbox</title>
    <meta charset="UTF-8" />
    <link rel="stylesheet" href="./src/styles.css" />
    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@100;300;400;500;700;900&display=swap"
      rel="stylesheet"
    />
    <script>
      const TARGET_CLASS = "todo-list-container";

      function allowDrop(ev) {
        ev.preventDefault();
      }

      function drop(ev) {
        ev.preventDefault();
        const todoId = ev.dataTransfer.getData("id");
        const todo = document.getElementById(todoId);

        const sourceSectionId = ev.dataTransfer.getData("parentId");
        const sourceSecionClass = ev.dataTransfer.getData("parentClass");

        const targetSectionClass = ev.target.classList[0];
        const targetSectionId = ev.target.id;

        /*
           todo-1
           section1
           todo-list-container drag-dist
           todo-list-container drag-dist
           section2
        */
        console.log(todoId);
        console.log(todo);

        console.log(sourceSectionId);
        console.log(sourceSecionClass);

        console.log(targetSectionClass);
        console.log(targetSectionId);

        if (
          targetSectionClass === TARGET_CLASS &&
          targetSectionId !== sourceSectionId
        ) {
          console.log("shouldappe");
          ev.target.appendChild(todo);
        }
      }
    </script>
  </head>

  <body>
    <div class="container">
      <h1>Awesome Todo App</h1>

      <form id="todo-form">
        <div class="todo-input-container">
          <input
            class="todo-input-title"
            type="text"
            name="text"
            placeholder="New todo..."
            required
          />
          <textarea
            class="todo-input-content"
            placeholder="What's in your mind?"
            value="test"
          ></textarea>
          <div class="todo-input-footer">
            <div id="input-completed">
              <label id="input-completed-label" for="completed">
                Completed
              </label>
              <input
                id="input-completed-checkbox"
                type="checkbox"
                name="completed"
              />
            </div>

            <button type="submit" id="create">
              + Add
            </button>
          </div>
        </div>
      </form>

      <section class="todo-sections">
        <section
          class="todo-list-container drag-dist"
          id="section1"
          ondrop="drop(event)"
          ondragover="allowDrop(event)"
        >
          <header class="todo-list-header">
            <h3>To do</h3>
          </header>
          <main class="todo-list">
            <p>No to do items yet!</p>
          </main>
        </section>

        <section
          class="todo-list-container drag-dist"
          id="section2"
          ondrop="drop(event)"
          ondragover="allowDrop(event)"
        >
          <header class="todo-list-header">
            <h3>To do</h3>
          </header>
          <main class="todo-list"></main>
        </section>

        <section
          class="todo-list-container drag-dist"
          id="section3"
          ondrop="drop(event)"
          ondragover="allowDrop(event)"
        >
          <header class="todo-list-header">
            <h3>To do</h3>
          </header>
          <main class="todo-list"></main>
        </section>

        <section
          class="todo-list-container drag-dist"
          id="section4"
          ondrop="drop(event)"
          ondragover="allowDrop(event)"
        >
          <header class="todo-list-header">
            <h3>To do</h3>
          </header>
          <main class="todo-list"></main>
        </section>
      </section>
    </div>

    <div>
      <div
        class="drag-dist"
        ondrop="drop(event)"
        ondragover="allowDrop(event)"
      ></div>
      <div
        class="drag-dist"
        ondrop="drop(event)"
        ondragover="allowDrop(event)"
      ></div>
      <div class="drag-dist" ondrop="drop(event)" ondragover="allowDrop(event)">
        DragHere
      </div>

      <div class="drag-item" draggable="true" ondragstart="drag(event)">
        Drag Me
      </div>
    </div>

    <script src="src/index.js"></script>
  </body>
</html>
